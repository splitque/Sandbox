on_actions = {

	# Elections
	on_new_term_election = {
		random_events = {
			100 = elections.100
			100 = elections.200
			100 = elections.300
			100 = elections.400
		}
	}

	# Ace pilots
	# country, FROM = ace
	on_ace_promoted = {
		random_events = {
			100 = ace_promoted.1
			5 = ace_promoted.2
		}
	}

	# country, FROM = ace, PREV = enemy ace
	# This event fires twice, once for each ace.
	on_aces_killed_each_other = {
		random_events = {
			100 = aces_killed_each_other.1
		}
	}

	# country, FROM = our ace,
	# PREV = enemy ace, has killed FROM
	on_ace_killed_by_ace = {
		random_events = {
			100 = ace_killed_by_ace.1
		}
	}

	# country, FROM = our ace,
	# PREV = enemy ace, killed by FROM
	on_ace_killed_other_ace = {
		random_events = {
			100 = ace_killed_other_ace.1
		}
	}

	# our ace is killed by no name
	# country, FROM = ace
	on_ace_killed = {
		random_events = {
			100 = ace_died.1
		}
	}

	# During justifying wargoals
	# triggered daily, so make sure there is a sink somewhere not firing events
	# country, FROM = target nation
	on_justifying_wargoal_pulse = {

		random_events = {
			100 = war_justification.1
			100 = war_justification.2
			100 = war_justification.3
			100 = war_justification.4
			100 = war_justification.5
			100 = war_justification.6
			100 = war_justification.7
			100 = war_justification.8
			100 = war_justification.9
			100 = war_justification.10
			100 = war_justification.11
			100 = war_justification.12
			100 = war_justification.13
			100 = war_justification.14
			100 = war_justification.15
			100 = war_justification.16
			100 = war_justification.17
			100 = war_justification.18
			100 = war_justification.19
			17000 = 0
		}
	}

	on_wargoal_expire = {
		random_events = {
			100 = war_justification.301
		}
	}

	on_nuke_drop = {

		effect = {
			set_global_flag = first_nuke_dropped
			if = {
				limit = { NOT = { has_global_flag = first_nuke_dropped } }
				country_event = { id = generic.8 }
			}
			if = {
				limit = { has_idea = race_for_the_bomb_outclassed }
				remove_ideas = race_for_the_bomb_outclassed
			}
			if = {
				limit = { NOT = { has_country_flag = achievement_has_dropped_nuke } }
				goto_state = FROM
				set_country_flag = achievement_has_dropped_nuke
			}
			if = {
				limit = {
					FROM = { state = 378 }
				}
				set_country_flag = achievement_has_nuked_california
			}
			if = {
				limit = {
					FROM = { is_core_of = AST }
				}
				set_country_flag = achievement_AST_nuke_self
			}
			if = {
				limit = {
					tag = SWE
					FROM = {
						is_owned_by = DEN
						is_core_of = DEN
					}
				}
				set_country_flag = achievement_med_plutonium
			}
			if = {
				limit = {
					FROM = {
						is_core_of = JAP
					}
					has_global_flag = JAP_nuke_1
					NOT = {
						has_global_flag = JAP_nuke_2
					}
				}
				set_global_flag = JAP_nuke_2
			}
			if = {
				limit = {
					FROM = {
						is_core_of = JAP
					}
					NOT = {
						has_global_flag = JAP_nuke_1
					}
				}
				set_global_flag = JAP_nuke_1
			}

			news_event = { id = nuke_dropped.2 days = 1}
			news_event = { id = nuke_dropped.3 days = 1}
			news_event = { id = nuke_dropped.4 days = 1}
			news_event = { id = nuke_dropped.5 days = 1}
			news_event = { id = nuke_dropped.6 days = 1}
			news_event = { id = nuke_dropped.7 days = 1}
			news_event = { id = nuke_dropped.8 days = 1}
			news_event = { id = nuke_dropped.9 days = 1}
			news_event = { id = nuke_dropped.10 days = 1}
			news_event = { id = nuke_dropped.11 days = 1}
			news_event = { id = nuke_dropped.12 days = 1}
			news_event = { id = nuke_dropped.13 days = 1}
		}
		random_events = {
			100 = nuke_dropped.0
		}
	}

	#FROM is war target
	on_declare_war = {
		effect = {
			#If prepared by siphoning equipment, receive equipment back
			if = {
				limit = {
					FROM = {
						has_civil_war = yes
						has_country_flag = siphoned_equipment_stockpiles_for_civil_war
					}
					has_civil_war = yes
				}
				FROM = {
					clr_country_flag = siphoned_equipment_stockpiles_for_civil_war
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1000
					}
				}
			}

			#If prepared with surprise attack plan, get bonus
			if = {
				limit = {
					FROM = {
						original_tag = ROOT
						#has_civil_war = yes
						has_country_flag = formulated_surprise_attack_plan_for_civil_war
					}
					#has_civil_war = yes
				}
				FROM = {
					clr_country_flag = formulated_surprise_attack_plan_for_civil_war
					add_timed_idea = {
						idea = civil_war_surprise_attack_plan
						days = 30
					}
				}
			}
		}
	}

	# When a new faction is formed
	on_faction_formed = {
		effect = {
			news_event = { id = news.159 }
		}
	}

	on_government_change = {
		effect = {
			if = {
				limit = { has_government = democratic }
				if = {
					limit = { has_idea = democratic_opposition_voicing_protests }
					remove_ideas = democratic_opposition_voicing_protests
				}
				if = {
					limit = { has_idea = democratic_revolutionaries }
					remove_ideas = democratic_revolutionaries
				}
				if = {
					limit = { has_idea = reign_of_terror }
					remove_ideas = reign_of_terror
				}
			}
			if = {
				limit = { has_government = communism }
				if = {
					limit = { has_idea = communist_partisans_recruiting }
					remove_ideas = communist_partisans_recruiting
				}
				if = {
					limit = { has_idea = communist_revolutionaries }
					remove_ideas = communist_revolutionaries
				}
				if = {
					limit = { has_idea = communism_defeated }
					remove_ideas = communism_defeated
				}

				#Remove anti_soviet_pact
				if = {
					limit = { has_idea = anti_soviet_pact }
					remove_ideas = anti_soviet_pact
				}
			}
			if = {
				limit = { has_government = fascism }
				if = {
					limit = { has_idea = fascist_assault_divisions }
					remove_ideas = fascist_assault_divisions
				}
				if = {
					limit = { has_idea = fascist_revolutionaries }
					remove_ideas = fascist_revolutionaries
				}
				if = {
					limit = { has_idea = fascism_defeated }
					remove_ideas = fascism_defeated
				}
				if = {
					limit = { has_idea = anti_nazi_coup }
					remove_ideas = anti_nazi_coup
				}
			}
		}
	}

	on_coup_succeeded = {
		effect = {
			#Turn elections on for democracies created from coup
			random_other_country = {
				limit = {
					has_government = democratic
					original_tag = ROOT
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
			}
		}
	}

	#ROOT is winner #FROM gets annexed - This will also fire on_annex
	on_civil_war_end = {
		effect = {
			#End of ideology Civil War
			if = {
				limit = {
					has_country_flag = ideology_civil_war
				}
				clr_country_flag = ideology_civil_war
				set_country_flag = { flag = won_ideology_civil_war value = 1 days = 365 }
				country_event = { id = generic.11 days = 1 }
			}
		}
	}

	#used when puppeting in a peace conference
	#ROOT = nation being puppeted, FROM = overlord

	on_puppet = {
		effect = {
			if = {
				limit = {
					NOT = { has_elections = yes }
					has_government = democratic
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
			}
		}
	}

	#used when puppeting through the occupied territories menu during peace time (or when releasing from non-core but owned territory, f.e. Britain releasing Egypt)
	#ROOT = nation being released, FROM = overlord

	on_release_as_puppet = {
		effect = {
			if = {
				limit = {
					NOT = { has_elections = yes }
					has_government = democratic
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
			}
		}
	}


	#ROOT is new controller #FROM is old controller #FROM.FROM is state ID
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					FROM = {
						is_in_faction = yes
					}

					FROM.FROM = {
						has_state_flag = prevent_auto_flip_after_capitulation
					}
				}

				FROM.FROM = { clr_state_flag = prevent_auto_flip_after_capitulation }
				FROM = {
					set_state_controller = FROM.FROM
				}
				
			}
		}
	}



	# From is owner country
	on_army_leader_daily = {
		effect = {
			if = {
				limit = {
					check_variable = { random < 0.02 }
					NOT = { has_trait = sick }
					set_temp_variable = { temp = sum_unit_terrain_modifier@sickness_chance }
					divide_temp_variable = { temp = num_units }
					check_variable = { temp > 0.75 }
					NOT = { has_unit_leader_flag = recently_sick }
				}
				add_timed_unit_leader_trait = {
					trait = sick
					days = 30
				}
				unit_leader_event = { id = generic.17 }
			}
		}
	}

	# From is owner country
	on_army_leader_won_combat = {
		effect = {
			if = {
				limit = {
					set_temp_variable = { chance = 0.001 }
					set_temp_variable = { factor = 1.0 }
					add_to_temp_variable = { factor = leader_modifier@wounded_chance_factor }
					multiply_temp_variable = { chance = factor }
					check_variable = { random < chance }
					NOT = { has_trait = wounded }
				}
				add_timed_unit_leader_trait = {
					trait = wounded
					days = 90
				}
				unit_leader_event = { id = generic.18 }
			}
		}
	}

	# From is owner country
	on_army_leader_lost_combat = {
		effect = {
			if = {
				limit = {
					set_temp_variable = { chance = 0.005 }
					set_temp_variable = { factor = 1.0 }
					add_to_temp_variable = { factor = leader_modifier@wounded_chance_factor }
					multiply_temp_variable = { chance = factor }
					check_variable = { random < chance }
					NOT = { has_trait = wounded }
				}
				add_timed_unit_leader_trait = {
					trait = wounded
					days = 90
				}
				unit_leader_event = { id = generic.18 }
			}
		}
	}

	on_army_leader_promoted = {
		effect = {
			add_timed_unit_leader_trait = {
				trait = recently_promoted
				days = 100
			}
		}
	}


	# root country that paradrops
	# scope state that is paradroped into
	# from scope state that the paradrop started
	on_paradrop = {
	    effect = {
		    set_country_flag = has_paradropped_flag
		}
	}
	on_ruling_party_change = {
		# temp var old_ideology_token is available for effects
		effect = {
			every_controlled_state = {
				limit = {
					has_resistance = yes
				}
				set_temp_variable = { new_compliance = compliance }
				multiply_temp_variable = { new_compliance = 0.5 }
				set_compliance = new_compliance
			}
		}
	}

	on_unit_leader_promote_from_ranks_veteran = { #Unit leader scope, FROM is unit
		effect = {
			FROM = {
				add_random_valid_trait_from_unit = {
					character = ROOT
				}
			}
			set_unit_leader_flag = field_promotion_achievement
		}
	}

	on_unit_leader_promote_from_ranks_green = { #Unit leader scope, FROM is unit
		effect = {
			set_unit_leader_flag = field_promotion_achievement
		}
	}

    on_startup = {
        effect = {
            every_country = {
                every_owned_state = {
                    add_core_of = THIS
                }
            }

			# Game Rules - Decolonization
			if = {
				limit = {
					has_game_rule = {
						rule = americas_colonization_status
						option = AMERICAS_DECOLONIZED
					}
				}
				696 = { add_core_of = CAN }
				299 = { add_core_of = GYA }
				720 = { add_core_of = GYA }
				270 = { add_core_of = GYA }
				ENG = {
					release = BLZ
					release = BAH
					release = GYA
					release = JAM
					release = TRI
					release = BAS
					release = CAN
				}
				HOL = {
					release = CRC
					release = SUR
				}
				730 = { add_core_of = CAN }
				FRA = {
					release = GDL
					release = CAY
					release = CAN
				}
				USA = {
					delete_unit = { state = 686 }
					release = PUE
				}
				PAN = {
					transfer_state = 685
				}
				ENG = {
					set_autonomy = { target = CAN autonomy_state = autonomy_free }
				}
				CAN = {
					abandon_colony_tag = yes
					transfer_state = 332
					transfer_state = 331
				}
			}
			IF = {
				limit = {
					has_game_rule = {
						rule = americas_colonization_status
						option = AMERICAS_DEIMPERIALIZED
					}
				}

				### North America ###

				# Canadian First Nations
				ENG = {
					set_autonomy = { target = CAN autonomy_state = autonomy_free }
					dismantle_faction = yes
				}
				CAN = {
					abandon_colony_tag = yes
					drop_cosmetic_tag = yes
					set_cosmetic_tag = first_nations_canada
					CAN_first_nations_council = {
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = despotism
								traits = { non_aligned_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = conservatism
								traits = { democratic_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = marxism
								traits = { communist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = falangism
								traits = { fascist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
					}
				}
				every_state = {
					limit = {
						OR = {
							state = 860
							state = 863
							state = 862
							state = 468
							state = 465
							state = 464
							state = 276
							state = 682
							state = 866
							state = 867
							state = 467
							state = 865
							state = 469
							state = 470
							state = 473
							state = 471
							state = 740
							state = 739
							state = 331
							state = 730
						}
					}
					add_core_of = CAN
					transfer_state_to = CAN
				} 
				MEX = {
					release = RIG
				}

				# Inuit
				every_state = {
					limit = {
						OR = {
							state = 463
							state = 864
							state = 472
							state = 683
							state = 466
							state = 332
							state = 101
							state = 861
							state = 650
							state = 875
						}
					}
					add_core_of = INU
					transfer_state_to = INU
				}

				# Native North America
				USA = {
					set_autonomy = { target = PHI autonomy_state = autonomy_free }
					delete_unit = { state = 686 }
					release = HAW 
					release = PUE 
					drop_cosmetic_tag = yes
					set_cosmetic_tag = native_american_usa
					USA_native_american_council = {
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = despotism
								traits = { non_aligned_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = conservatism
								traits = { democratic_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = marxism
								traits = { communist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = falangism
								traits = { fascist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
					}
				}

				# Indigenista Mexico
				MEX = {
					drop_cosmetic_tag = yes
					set_cosmetic_tag = indigenous_mexico
					MEX_indigenous_council = {
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = despotism
								traits = { non_aligned_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = conservatism
								traits = { democratic_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = marxism
								traits = { communist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = falangism
								traits = { fascist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
					}
				}

				### Central America ###

				# Maya
				every_state = {
					limit = {
						OR = {
							state = 313
							state = 475
							state = 476
							state = 474
						}
					}
					add_core_of = MAY
					transfer_state_to = MAY
				} 

				# Itza
				311 = {
					add_victory_points = {
						province = 2077
						value = 2
					}	
					set_province_name = {
					    id = 2077
					    name = 2077_indigenous_city_name
					}
				}

				every_state = {
					limit = {
						state = 311
					}
					add_core_of = ITZ
					transfer_state_to = ITZ
				} 

				# Nahua
				every_state = {
					limit = {
						state = 314
					}
					add_core_of = NAH
					transfer_state_to = NAH
				} 

				# Miskito
				317 = {
					add_victory_points = {
						province = 2075
						value = 4
					}	
				}

				every_state = {
					limit = {
						OR = {
							state = 312
							state = 317
						}
					}
					add_core_of = MIS
					transfer_state_to = MIS
				} 

				### South America ###

				# Isthmo-Amerindia
				every_state = {
					limit = {
						OR = {
							state = 316
							state = 304
							state = 493
							state = 306
							state = 486
							state = 307
							state = 489
							state = 685
							state = 695
							state = 691
						}
					}
					add_core_of = IAS
					transfer_state_to = IAS
				} 

				# El Dorado
				every_state = {
					limit = {
						OR = {
							state = 310
							state = 309
							state = 687
							state = 488
							state = 939
							state = 969
							state = 968
						}
					}
					add_core_of = SUR
					transfer_state_to = SUR
				} 

				SUR = {
					drop_cosmetic_tag = yes
					set_cosmetic_tag = united_guiana
					SUR_guianan_indigenous_council = {
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = despotism
								traits = { non_aligned_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = conservatism
								traits = { democratic_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = marxism
								traits = { communist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = falangism
								traits = { fascist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
					}
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
				}

				# Inca
				every_state = {
					limit = {
						OR = {
							state = 494
							state = 492
							state = 947
							state = 303
							state = 951
							state = 506
							state = 491
							state = 490
							state = 305
							state = 940
							state = 649
						}
					}
					add_core_of = INC
					transfer_state_to = INC
				} 

				# Pindorama
				every_state = {
					limit = {
						OR = {
							state = 495
							state = 938
							state = 280
							state = 497
							state = 941
							state = 937
							state = 935
							state = 498
							state = 936
							state = 499
							state = 505
							state = 496
							state = 943
							state = 500
							state = 501
							state = 967
							state = 961
							state = 964
							state = 963
							state = 962
							state = 965
							state = 966
						}
					}
					add_core_of = BRA
					transfer_state_to = BRA
				} 

				BRA = {
					drop_cosmetic_tag = yes
					set_cosmetic_tag = indigenous_brazil
					BRA_indigenous_council = {
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = despotism
								traits = { non_aligned_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = conservatism
								traits = { democratic_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = marxism
								traits = { communist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = falangism
								traits = { fascist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
					}
				}

				# Bolivia
				every_state = {
					limit = {
						OR = {
							state = 487
							state = 302
							state = 942
						}
					}
					add_core_of = BOL
				}
				
				BOL = {
					drop_cosmetic_tag = yes
					set_cosmetic_tag = true_plurinational_bolivia
					BOL_indigenous_council = {
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = despotism
								traits = { non_aligned_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = conservatism
								traits = { democratic_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = marxism
								traits = { communist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = falangism
								traits = { fascist_council_trait }
								expire = "1980.1.1.1"
								id = -1
							}
						}
					}
				}

				# Guarani
				every_state = {
					limit = {
						OR = {
							state = 301
							state = 688
							state = 957
							state = 510
							state = 504
							state = 944
							state = 503
							state = 502
						}
					}
					add_core_of = GAR
					transfer_state_to = GAR
				} 

				# Charrua
				every_state = {
					limit = {
						OR = {
							state = 300
							state = 945
							state = 946
						}
					}
					add_core_of = CHR
					transfer_state_to = CHR
				} 

				# Rapa Nui
				every_state = {
					limit = {
						OR = {
							state = 948
							state = 270
						}
					}
					add_core_of = RAP
					transfer_state_to = RAP
				}

				### Caribbean ###

				ENG = {
					release = BLZ
					release = BAH
					release = JAM
					release = BAS
				}
				FRA = {
					release = GDL
				}


				### Chile ###
				CHL = {
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}	
					add_popularity = {
						ideology = neutrality
						popularity = 0.8
					}
					set_cosmetic_tag = CHL_mapuche_state	
					add_country_leader_role  = {
						character = CHL_manuel_manquilef
					    country_leader = {
					        ideology = despotism
					        expire = "1965.1.1.1"
					        traits = { JUNO_defender_of_araucania }
					    }
					}
					promote_character = {
						character = CHL_manuel_manquilef 
						ideology = despotism 
					}
					### Removing the now irrelevant Mapuche Conflict
					IF = {
						limit = {
							has_idea = CHL_the_mapuche_conflict_rebellion
						}
						remove_ideas = CHL_the_mapuche_conflict_rebellion
					}
					ELSE_IF = {
						limit = {
							has_idea = CHL_the_mapuche_conflict_much_worse
						}
						remove_ideas = CHL_the_mapuche_conflict_much_worse
					}
					ELSE_IF = {
						limit = {
							has_idea = CHL_the_mapuche_conflict_worse
						}
						remove_ideas = CHL_the_mapuche_conflict_worse
					}
					ELSE_IF = {
						limit = {
							has_idea = CHL_the_mapuche_conflict
						}
						remove_ideas = CHL_the_mapuche_conflict
					}
					ELSE_IF = {
						limit = {
							has_idea = CHL_the_mapuche_conflict_calmed
						}
						remove_ideas = CHL_the_mapuche_conflict_calmed
					}
					ELSE_IF = {
						limit = {
							has_idea = CHL_the_mapuche_conflict_near_gone
						}
						remove_ideas = CHL_the_mapuche_conflict_near_gone
					}
					ELSE_IF = {
						limit = {
							has_idea = CHL_mapuche_conflict_done
						}
						remove_ideas = CHL_mapuche_conflict_done
					}

					set_country_flag = CHL_no_more_mapuche_conflict

					set_capital = {
						state = 950
						remember_old_capital = no
					}

					add_victory_points = {
						province = 5121
						value = 8
					}

					set_party_name = {
					    ideology = neutrality
					    long_name = CHL_mapuche_party_long
					    name = CHL_mapuche_party
					}

					division_template = {
					    name = "Los Insurgentes Mapuche de Esteban Romero Sandoval"
					    is_locked = no
					    division_names_group = SPR_INF_01
					    override_model = CHL_infantry_alt_0_entity
					    priority = 1
					    template_counter = 83
					    regiments = {
					        infantry = { x = 0 y = 0 } 
					        infantry = { x = 0 y = 1 } 
					        infantry = { x = 0 y = 2 }
					        infantry = { x = 1 y = 0 }  
					        infantry = { x = 1 y = 1 } 
					        infantry = { x = 1 y = 2 } 
					    }
					} 
					random_state = {
						limit = {
							OR = {
								state = 950
								state = 949
								state = 507
								state = 953
								state = 954
								state = 955
								state = 512
							}
							is_controlled_by = ROOT
						}
						create_unit = {
						    division = "name = \"Los Insurgentes Primeros de Mapuche de Esteban Romero Sandoval\" division_template = \"Los Insurgentes Mapuche de Esteban Romero Sandoval\" start_experience_factor = 0.5 start_equipment_factor = 0.8"
						    owner = ROOT 
						}
						create_unit = {
						    division = "name = \"Los Insurgentes Segundo de Mapuche de Esteban Romero Sandoval\" division_template = \"Los Insurgentes Mapuche de Esteban Romero Sandoval\" start_experience_factor = 0.5 start_equipment_factor = 0.8"
						    owner = ROOT 
						}
					}

					division_template = {
					    name = "Guerreros Abajinos"
					    is_locked = no
					    division_names_group = SPR_INF_01
					    override_model = CHL_infantry_alt_1_entity
					    priority = 1
					    template_counter = 85
					    regiments = {
					        infantry = { x = 0 y = 0 } 
					        infantry = { x = 0 y = 1 } 
					        infantry = { x = 1 y = 0 }  
					        infantry = { x = 1 y = 1 } 
					    }
					} 
					random_state = {
						limit = {
							OR = {
								state = 950
								state = 949
								state = 507
								state = 953
								state = 954
								state = 955
								state = 512
							}
							is_controlled_by = ROOT
						}
						create_unit = {
						    division = "name = \"Guerreros Abajinos\" division_template = \"Guerreros Abajinos\" start_experience_factor = 0.5 start_equipment_factor = 1"
						    owner = ROOT 
						}
					}

					every_state = {
						limit = {
							OR = {
								state = 953
								state = 299
								state = 720
								state = 954
								state = 955
								state = 512
							}
						}
						add_core_of = CHL
						transfer_state_to = CHL
					}

					every_state = {
						limit = {
							OR = {
								state = 511
								state = 958
								state = 278
								state = 956
								state = 960
								state = 508
								state = 509
								state = 959
							}
						}
						transfer_state_to = CHL
					}

				}



			}

			if = {
				limit = {
					has_game_rule = {
						rule = africa_colonization_status
						option = AFRICA_DECOLONIZED
					}
				}
				713 = { add_core_of = MAD }
				FRA = {
					delete_unit = { state = 272 }
					delete_unit = { state = 539 }
					delete_unit = { state = 543 }
					delete_unit = { state = 461 }
					delete_unit = { state = 458 }
					delete_unit = { state = 459 }
					release = MOR
					release = ALG
					release = TUN
					release = DJI
					release = MAD
					release = GAB
					release = RCG
					release = CMR
					release = CAR
					release = CHA
					release = DAH
					release = TOG
					release = IVO
					release = VOL
					release = MLI
					release = GNA
					release = SEN
					release = NGR
					release = MRT
				}
				ITA = {
					release = ETH #For 1939 bookmark
					release = LBA
					release = ERI
					release = SOM
					transfer_units_fraction = {
						target = SOM
						size = 1
					}

					#Delete all BBA extra templates
					if = {
						limit = {
							has_dlc = "By Blood Alone"
						}
						LBA = { #Some left on purpose because kinda fitting
							delete_unit_template_and_units = {
								division_template = "Camicie Nere"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Coloniale"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Indigena Irregolare"
							}
							delete_unit_template_and_units = {
								division_template = "Truppe Irregolari a Cavallo"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Libica"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Eritrea"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Somala"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Libica"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Eritrea"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Somala"
							}
						}

						ERI = { #Some left on purpose because kinda fitting
							delete_unit_template_and_units = {
								division_template = "Camicie Nere"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Coloniale"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Indigena Irregolare"
							}
							delete_unit_template_and_units = {
								division_template = "Truppe Irregolari a Cavallo"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Libica"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Eritrea"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Somala"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Libica"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Eritrea"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Somala"
							}
						}

						SOM = {
							delete_unit_template_and_units = {
								division_template = "Camicie Nere"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Coloniale"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Indigena Irregolare"
							}
							delete_unit_template_and_units = {
								division_template = "Truppe Irregolari a Cavallo"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Libica"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Eritrea"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Somala"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Libica"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Eritrea"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Somala"
							}
						}

						ETH = {
							delete_unit_template_and_units = {
								division_template = "Camicie Nere"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Coloniale"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Indigena Irregolare"
							}
							delete_unit_template_and_units = {
								division_template = "Truppe Irregolari a Cavallo"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Libica"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Eritrea"
							}
							delete_unit_template_and_units = {
								division_template = "Divisione Ascari Somala"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Libica"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Eritrea"
							}
							delete_unit_template_and_units = {
								division_template = "Banda Irregolare Somala"
							}
						}
					}
				}
				SOM = {
					transfer_state = 269
					transfer_units_fraction = {
						target = ITA
						size = 1
					}
				}
				707 = { add_core_of = MAD }
				709 = { add_core_of = MAD }
				703 = { add_core_of = SAF }
				704 = { add_core_of = SAF }
				ENG = {
					delete_unit = { state = 447 }
					delete_unit = { state = 446 }
					delete_unit = { state = 453 }
					delete_unit = { state = 551 }
					delete_unit = { state = 547 }
					delete_unit = { state = 546 }
					delete_unit = { state = 558 }
					delete_unit = { state = 274 }
					release = EGY
					release = SUD
					release = UGA
					release = TZN
					release = ZAM
					release = MLW
					release = KEN
					release = ZIM
					release = BOT
					release = NGA
					release = GHA
					release = SIE
					release = GAM
					release = MAD
					release = SAF
				}
				BEL = {
					delete_unit = { state = 295 }
					release = RWA
					release = BRD
					release = COG
				}
				SAF = {
					release = NMB
				}
				702 = { add_core_of = GNB }
				POR = {
					delete_unit = { state = 540 }
					delete_unit = { state = 544 }
					release = MZB
					release = ANG
					release = GNB
				}
				SPR = {
					delete_unit = { state = 290 }
					release = WES
					release = EQG
					release = MRT
				}
				ITA = { ITA_peace_out_eth_on_startup_effect = yes }
				MOR = {
					transfer_state = 290
					transfer_state = 783
				}
				ENG = {
					set_autonomy = { target = SAF autonomy_state = autonomy_free }
				}
				SAF = {
					retire_country_leader = yes
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = oceania_colonization_status
						option = OCEANIA_DECOLONIZED
					}
				}
				ENG = {
					release = FIJ
				}
				USA = {
					delete_unit = { state = 629 }
					delete_unit = { state = 630 }
					delete_unit = { state = 631 }
					delete_unit = { state = 632 }
					delete_unit = { state = 638 }
					delete_unit = { state = 642 }
					delete_unit = { state = 727 }
					release = HAW
					release = GUM
				}
				JAP = {
					delete_unit = { state = 684 }
					delete_unit = { state = 633 }
					delete_unit = { state = 647 }
					delete_unit = { state = 646 }
					delete_unit = { state = 648 }
					delete_unit = { state = 645 }
					release = GUM
					release = FSM
				}
				FRA = {
					release = TAH
				}
				AST = {
					release = PNG
					release = SOL
				}
				NZL = {
					release = SAM
				}
				ENG = {
					set_autonomy = { target = AST autonomy_state = autonomy_free }
					set_autonomy = { target = NZL autonomy_state = autonomy_free }
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = oceania_colonization_status
						option = OCEANIA_UNITED
					}
				}
				284 = { 
					add_core_of = HAW
				}
				629 = {
					add_core_of = HAW
				}
				630 = {
					add_core_of = HAW
				}
				631 = {
					add_core_of = HAW
				}
				632 = {
					add_core_of = HAW
				}
				633 = {
					add_core_of = HAW
				}
				634 = {
					add_core_of = HAW
				}
				635 = {
					add_core_of = HAW
				}
				636 = {
					add_core_of = HAW
				}
				638 = {
					add_core_of = HAW
				}
				639 = {
					add_core_of = HAW
				}
				641 = {
					add_core_of = HAW
				}
				642 = {
					add_core_of = HAW
				}
				643 = {
					add_core_of = HAW
				}
				646 = {
					add_core_of = HAW
				}
				647 = {
					add_core_of = HAW
				}
				648 = { 
					add_core_of = HAW 
				}
				684 = {
					add_core_of = HAW
				}
				723 = {
					add_core_of = HAW
				}
				725 = {
					add_core_of = HAW
				}
				726 = {
					add_core_of = HAW
				}
				727 = {
					add_core_of = HAW
				}
				734 = {
					add_core_of = HAW
				}
				645 = {
					add_core_of = HAW
				} #Iwo Jima
				ENG = {
					release = HAW
					set_autonomy = { target = AST autonomy_state = autonomy_free }
				}
				USA = {
					delete_unit = { state = 629 }
					delete_unit = { state = 630 }
					delete_unit = { state = 631 }
					delete_unit = { state = 632 }
					delete_unit = { state = 638 }
					delete_unit = { state = 642 }
					delete_unit = { state = 727 }
					release = HAW
				}
				JAP = {
					delete_unit = { state = 684 }
					delete_unit = { state = 633 }
					delete_unit = { state = 647 }
					delete_unit = { state = 646 }
					delete_unit = { state = 648 }
					delete_unit = { state = 645 }
					release = HAW
				}
				FRA = {
					release = HAW
				}
				AST = {
					release = HAW
					release = PNG
				}
				HAW = {
					change_tag_from = NZL
				}
				set_global_flag = form_polynesia_flag
				
				524 = { add_core_of = HAW } #Taiwan
				
				284 = { 
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				629 = {
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = industrial_complex
						level = 3
						instant_build = yes
					}
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				631 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				633 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				634 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				635 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				636 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				638 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				639 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				641 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				642 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				643 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				646 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				647 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				684 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				723 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				725 = {
					add_extra_state_shared_building_slots = 1
				}
				726 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				727 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				734 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				645 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				} #Iwo Jima
				
				HAW = {
					set_cosmetic_tag = united_polynesia
					country_event = tfv_new_zealand.8
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = asia_colonization_status
						option = ASIA_DECOLONIZED
					}
				}
				710 = { add_core_of = MLD }
				711 = { add_core_of = MAL }
				712 = { add_core_of = MAL }
				733 = { add_core_of = MAL }
				ENG = {
					delete_unit = { state = 454 }
					delete_unit = { state = 659 }
					delete_unit = { state = 422 }
					delete_unit = { state = 326 }
					delete_unit = { state = 336 }
					release = MLD
					release = MAL
					release = SRL
					release = QAT
					release = KUW
					release = UAE
					release = PAL
					release = JOR
				}
				RAJ = {
					release = BRM
					release = BAN
					release = PAK
				}
				ENG = {
					set_autonomy = { target = RAJ autonomy_state = autonomy_free }
					set_autonomy = { target = MAL autonomy_state = autonomy_free }
				}
				MAL = {
					abandon_colony_tag = yes
					retire_country_leader = yes
				}
				RAJ = {
					abandon_colony_tag = yes
					retire_country_leader = yes
				}
				HOL = {
					set_autonomy = { target = INS autonomy_state = autonomy_free }
				}
				MAL = {
					transfer_state = 721
				}
				INS = {
					abandon_colony_tag = yes
					retire_country_leader = yes
				}
				USA = {
					delete_unit = { state = 327 }
					set_autonomy = { target = PHI autonomy_state = autonomy_free }
				}
				FRA = {
					delete_unit = { state = 553 }
					delete_unit = { state = 741 }
					delete_unit = { state = 286 }
					delete_unit = { state = 671 }
					release = VIN
					release = CAM
					release = LAO
					release = LEB
					release = SYR
				}
				YEM = {
					transfer_state = 659
				}
				RAJ = {
					transfer_state = 321
					transfer_state = 320
				}
				728 = { add_core_of = GXC }
				729 = { add_core_of = GXC }
				326 = { add_core_of = GXC }
				GXC = {
					transfer_state = 728
					transfer_state = 729
					transfer_state = 326
				}
				JAP = {
					set_autonomy = { target = MAN autonomy_state = autonomy_free }
					set_autonomy = { target = MEN autonomy_state = autonomy_free }
					release = KOR
					transfer_units_fraction = {
						target = KOR
						size = 1
					}
				}
				MAN = {
					transfer_state = 745
				}
				CHI = {
					transfer_state = 609
					transfer_state = 524
				}
				KOR = {
					transfer_units_fraction = {
						target = JAP
						size = 1
					}
				}
			}

			# Game Rules - Fragmentation
			if = {
				limit = {
					has_game_rule = {
						rule = eng_fragmentation_status
						option = ENG_FRAGMENTED
					}
				}
				ENG = {
					delete_unit = { state = 116 }
					release = SCO
					release = WLS
					release = NIR
					release = MLT
					release = CYP
					set_cosmetic_tag = ENG_england
					set_global_flag = ENG_became_england
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = spr_fragmentation_status
						option = SPR_EU4
					}
				}
				173 = { add_core_of = ADU }
				118 = { add_core_of = ADU }
				167 = { add_core_of = CAT }
				177 = { add_core_of = CAT }
				794 = { add_core_of = CAT }
				166 = { add_core_of = CAT }
				114 = { add_core_of = CAT }
				115 = { add_core_of = CAT }
				116 = { add_core_of = CAT }
				792 = { remove_core_of = NAV }
				SPR = {
					delete_unit = { state = 177 }
					release = CAT
					release = NAV
					release = GLC
					release = ADU
					set_cosmetic_tag = SPR_castille
					set_politics = {
						ruling_party = neutrality
						elections_allowed = yes
					}
					set_political_party = {
						ideology = neutrality
						popularity = 85
					}
					transfer_units_fraction = {
						target = CAT
						size = 0.2
					}
					transfer_units_fraction = {
						target = GLC
						size = 0.025
					}
					transfer_units_fraction = {
						target = NAV
						size = 0.025
					}
					transfer_units_fraction = {
						target = ADU
						size = 0.1
					}
				}
				SPA = {
					set_cosmetic_tag = SPR_nationalist_castille
				}
				SPB = {
					set_cosmetic_tag = SPR_carlist_castille
				}
				SPC = {
					set_cosmetic_tag = SPR_anarchist_castille
				}
				SPD = {
					set_cosmetic_tag = SPR_republican_castille
				}
				ENG = {
					delete_unit = { state = 118 }
					release = ADU
					release = CAT
				}
				ITA = {
					release = CAT
				}
				CAT = {
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
					set_political_party = {
						ideology = neutrality
						popularity = 85
					}
					set_cosmetic_tag = CAT_aragon
				}
				NAV = {
					set_politics = {
						ruling_party = neutrality
					}
					set_political_party = {
						ideology = neutrality
						popularity = 85
					}
				}
				GLC = {
					set_politics = {
						ruling_party = neutrality
					}
					set_political_party = {
						ideology = neutrality
						popularity = 85
					}
				}
				ADU = {
					set_country_flag = country_formed_andalusia_flag
				}
				set_global_flag = form_andalusia_flag
				792 = { add_core_of = NAV }
				165 = { add_core_of = ADU }
				171 = { add_core_of = ADU }
				792 = { add_core_of = ADU }
				172 = { add_core_of = ADU }
				790 = { add_core_of = ADU }
				789 = { add_core_of = ADU }
				41 = { add_core_of = ADU }
				169 = { add_core_of = ADU }
				168 = { add_core_of = ADU }
				167 = { add_core_of = ADU }
				794 = { add_core_of = ADU }
				793 = { add_core_of = ADU }
				791 = { add_core_of = ADU }
				788 = { add_core_of = ADU }
				178 = { add_core_of = ADU }
				177 = { add_core_of = ADU }
				176 = { add_core_of = ADU }
				175 = { add_core_of = ADU }
				174 = { add_core_of = ADU }
				170 = { add_core_of = ADU }
				166 = { add_core_of = ADU }
				112 = { add_core_of = ADU }
				179 = { add_core_of = ADU }
				180 = { add_core_of = ADU }
				181 = { add_core_of = ADU }
				697 = { add_core_of = ADU }
				698 = { add_core_of = ADU }
				795 = { add_core_of = ADU }
				173 = { add_core_of = ADU }
				118 = { add_core_of = ADU }
				
				165 = { add_core_of = SPR }
				167 = { add_core_of = SPR }
				177 = { add_core_of = SPR }
				171 = { add_core_of = SPR }
				172 = { add_core_of = SPR }
				173 = { add_core_of = SPR }
				794 = { add_core_of = SPR }
				166 = { add_core_of = SPR }
				
				#Italy should keep their cores on the Med. Islands
				114 = { add_core_of = ITA }
				115 = { add_core_of = ITA }
				
				#Kingdom of Naples
				117 = { add_core_of = CAT }
				156 = { add_core_of = CAT }
				849 = { add_core_of = CAT }
			}
			if = {
				limit = {
					has_game_rule = {
						rule = spr_fragmentation_status
						option = SPR_FRAGMENTED
					}
				}
				SPR = {
					release = CAT
					release = NAV
					release = GLC
				}
				165 = { add_core_of = SPR }
				171 = { add_core_of = SPR }
				172 = { add_core_of = SPR }
				792 = { add_core_of = SPR }
			}
			if = {
				limit = {
					has_game_rule = {
						rule = fra_fragmentation_status
						option = FRA_FRAGMENTED
					}
				}
				FRA = {
					release = OCC
					release = BRI
					release = COR
					release = NAV
					transfer_units_fraction = {
						target = OCC
						size = 0.4
					}
					transfer_units_fraction = {
						target = BRI
						size = 0.1
					}
					transfer_units_fraction = {
						target = COR
						size = 0.001
					}
					transfer_units_fraction = {
						target = NAV
						size = 0.001
					}
				}
				1 = { add_core_of = FRA }
				14 = { add_core_of = FRA }
				19 = { add_core_of = FRA }
				20 = { add_core_of = FRA }
				21 = { add_core_of = FRA }
				851 = { add_core_of = FRA }
				22 = { add_core_of = FRA }
				25 = { add_core_of = FRA }
				26 = { add_core_of = FRA }
				31 = { add_core_of = FRA }
				32 = { add_core_of = FRA }
				735 = { add_core_of = FRA }
				806 = { add_core_of = FRA }
			}
			if = {
				limit = {
					has_game_rule = {
						rule = yug_fragmentation_status
						option = YUG_FRAGMENTED
					}
				}
				764 = {
					remove_core_of = YUG
				}
				736 = {
					remove_core_of = YUG
				}
				852 = {
					remove_core_of = YUG
				}
				YUG = {
					release = SLV
					release = BOS
					release = MAC
					release = SER
					transfer_units_fraction = {
						target = SER
						size = 1
					}
					release = CRO
					release = MNT
				}
				SER = {
					change_tag_from = YUG
				}
				#SER = {
				#	country_event = DOD_yugoslavia.166 # MM: Commented since it is a NON-EXISTENT EVENT
				#}
				CRO = {
					set_political_party = {
						ideology = democratic
						popularity = 50
					}
					set_politics = {
						ruling_party = democratic
						last_election = "1936.1.1"
						election_frequency = 48
						elections_allowed = yes
					}
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = sov_fragmentation_status
						option = SOV_FRAGMENTED
					}
				}
				SOV = {
					release = UKR
					release = BLR
					release = GEO
					release = AZR
					release = ARM
					release = UZB
					release = TAJ
					release = KYR
					release = TMS
					release = KAZ
					# retire_country_leader = yes
                    set_cosmetic_tag = SOV_russia
                    set_global_flag = SOV_became_russia
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = sov_fragmentation_status
						option = SOV_UTTERLY_FRAGMENTED
					}
				}
				#Add Repola and Uhtua VPs
				add_victory_points = {
					province = 6098 #Repola
					value = 1
				}
				add_victory_points = {
					province = 3067 #Uhtua
					value = 1
				}
				#Add Porajärvi VP
				add_victory_points = {
					province = 2998 #Porajärvi
					value = 1
				}
				SOV = {
					release = CRI
					release = MOL
					release = UKR
					release = BLR
					release = KAR
					release = ABK
					release = GEO
					release = AZR
					release = ARM
					release = CIN
					release = DAG
					release = NOA
					release = KBK
					release = KAL
					release = KHI
					release = KKP
					release = TAJ
					release = BUK
					release = UZB
					release = KYR
					release = TMS
					release = KAZ
					release = ALT
					release = KAZ
					release = VGE
					release = TAT
					release = BSK
					release = NEN
					release = KOM
					release = YAM
					release = OVO
					release = TAY
					release = BYA
					release = YAK
					release = CKK
					release = VLA
					release = FER
					release = UDM
					release = MEL
					release = CHU
					release = KHA
					release = SMI
					# retire_country_leader = yes
                    set_cosmetic_tag = SOV_russia
                    set_global_flag = SOV_became_russia
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = raj_fragmentation_status
						option = RAJ_FRAGMENTED
					}
				}
				RAJ = {
					release = BAN
					release = PAK
					release = BRM
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = nordics_fragmentation_status
						option = SAPMI_RELEASED
					}
				}
				148 = {
					add_victory_points = {
						province = 6142
						value = 4
					}
				}
				FIN = {
					release = SMI
				}
				SWE = {
					release = SMI
				}
				NOR = {
					release = SMI
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = nordics_fragmentation_status
						option = NORDICS_FRAGMENTED
					}
				}
				148 = {
					add_victory_points = {
						province = 6142
						value = 4
					}
				}
				#Add Repola and Uhtua VPs
				add_victory_points = {
					province = 6098 #Repola
					value = 1
				}
				add_victory_points = {
					province = 3067 #Uhtua
					value = 1
				}
				#Add Porajärvi VP
				add_victory_points = {
					province = 2998 #Porajärvi
					value = 1
				}
				101 = {
					add_core_of = GRN
				}
				FIN = {
					release = SMI
					release = KAR
				}
				SWE = {
					release = SMI
				}
				NOR = {
					release = SMI
				}
				DEN = {
					set_autonomy = {
						target = ICE
						autonomy_state = autonomy_free
						end_wars  = yes
						end_civil_wars = yes
					}	
					release = GRN	
				}
				101 = {
					set_state_controller_to = GRN
				}
				ICE = {
					drop_cosmetic_tag = yes
					IF = {
						limit = {
							has_idea = ICE_christian_x
						}
						remove_ideas = ICE_christian_x
					}
				}
			}

			if = {
				limit = {
					has_game_rule = {
						rule = quebec_colonization_status
						option = FREE_QUEBEC
					}
				}
				CAN = {
					release = QUE
					transfer_units_fraction = {
						target = QUE
						size = 0.3
					}
				}
				468 = {
					set_victory_points = {
						province = 4345
						value = 15
					}

					set_victory_points = {
						province = 12149
						value = 20
					}
				}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = eth_fragmentation_status
						option = ETH_FRAGMENTED
					}
				}
				ETH = {
					release = AFA
					release = TIG
					release = QEM
					release = BEG
					release = GBA
					release = SID
					release = HAR
					release = ORO
					transfer_units_fraction = {
						target = AFA
						size = 0.15
					}
					transfer_units_fraction = {
						target = TIG
						size = 0.1
					}
					transfer_units_fraction = {
						target = QEM
						size = 0.1
					}
					transfer_units_fraction = {
						target = BEG
						size = 0.1
					}
					transfer_units_fraction = {
						target = GBA
						size = 0.1
					}
					transfer_units_fraction = {
						target = SID
						size = 0.1
					}
					transfer_units_fraction = {
						target = HAR
						size = 0.15
					}
					transfer_units_fraction = {
						target = ORO
						size = 0.2
					}
				}
				ITA_peace_out_eth_on_startup_effect = yes
			}
			if = {
				limit = {
					has_game_rule = {
						rule = ita_fragmentation_status
						option = ITA_FRAGMENTED
					}
				}
				ITA = {
					delete_unit_template_and_units = {
						division_template = "Camicie Nere"
					}
					delete_unit_template_and_units = {
						division_template = "Divisione Coloniale"
					}
					delete_unit_template_and_units = {
						division_template = "Banda Indigena Irregolare"
					}
					delete_unit_template_and_units = {
						division_template = "Truppe Irregolari a Cavallo"
					}
					delete_unit_template_and_units = {
						division_template = "Divisione Ascari Libica"
					}
					delete_unit_template_and_units = {
						division_template = "Divisione Ascari Eritrea"
					}
					delete_unit_template_and_units = {
						division_template = "Divisione Ascari Somala"
					}
					delete_unit_template_and_units = {
						division_template = "Banda Irregolare Libica"
					}
					delete_unit_template_and_units = {
						division_template = "Banda Irregolare Eritrea"
					}
					delete_unit_template_and_units = {
						division_template = "Banda Irregolare Somala"
					}

					release = LBV
					release = PAP
					release = TOS
					release = SPM
					release = TTS
					
					transfer_units_fraction = {
						target = LBV
						size = 0.1
					}
					transfer_units_fraction = {
						target = PAP
						size = 0.1
					}
					transfer_units_fraction = {
						target = TOS
						size = 0.1
					}
					transfer_units_fraction = {
						target = SPM
						size = 0.1
					}
					#transfer_units_fraction = {
					#	target = TTS
					#	size = 0.2
					#}

					release = GRE #Last one so that ITA still has states during the transfer_units process, otherwise it will fail. But below we need to teleport armies from GRE to TTS

				}

				TTS =  {
					change_tag_from = ITA
				}
				TTS = {
					annex_country = {
						target = ITA
						transfer_troops = yes
					}

					164 = { #RHODES - Italian state that get's transferred to GRE with ITA fragmentation rule (above)
						teleport_armies = { # Unfortunately navies won't be transferred, they will have to sail back home :(
							limit = {
								tag = TTS
							}
							to_state_array = TTS.owned_controlled_states
						}
					}
				}

				if = {
					limit = {
						NOT = {
							has_game_rule = {
								rule = africa_colonization_status
								option = AFRICA_DECOLONIZED
							}
						}
					}
					TTS = { load_oob = ITA_1936_african_oob_for_fragmentation }
				}

				if = {
					limit = {
						NOT = {
							has_game_rule = {
								rule = eth_fragmentation_status
								option = ETH_FRAGMENTED
							}
						}
						NOT = {
							has_game_rule = {
								rule = africa_colonization_status
								option = AFRICA_DECOLONIZED
							}
						}
					}
					TTS = {
						declare_war_on = {
							target = ETH
							type = annex_everything
						}
					}
				}
			}
        }
    }
}
